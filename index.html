<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zero-Sum Thinking Explorer (Story 1‚Äì3)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.js"></script>
    <script src="./lib/zeroSumTest.js"></script>
  </head>
  <body>
    <!-- HKS Top Bar -->
    <div class="hks-bar">
      <div class="hks-bar__inner">
        <a href="https://www.hks.harvard.edu" class="hks-logo" target="_blank" rel="noopener noreferrer">
          <!-- Harvard Kennedy School Shield -->
          <img src="https://upload.wikimedia.org/wikipedia/en/c/c1/John_F._Kennedy_School_of_Government_Shield.svg" alt="Harvard Kennedy School Shield" class="hks-shield-img" />
          <span class="hks-text">Harvard Kennedy School</span>
        </a>
      </div>
    </div>

    <header class="header">
      <div class="container header__inner">
        <div class="brand">
          <div class="brand__text">
            <div class="brand__title">Zero-Sum Thinking</div>
            <div class="brand__subtitle">Understanding Economic Mindsets</div>
          </div>
        </div>

        <nav class="nav">
          <div class="nav__dropdown">
            <button class="nav__link" data-route="learn" aria-current="page">Home</button>
            <div class="nav__dropdown-menu">
              <button class="nav__dropdown-item" data-route="concept">Basics</button>
              <button class="nav__dropdown-item" data-route="data">Visualize</button>
              <button class="nav__dropdown-item" data-route="test">Test</button>
              <button class="nav__dropdown-item" data-route="research">Research</button>
              <button class="nav__dropdown-item" data-route="about">About</button>
            </div>
          </div>
          <button class="nav__link" data-route="concept">Basics</button>
          <button class="nav__link" data-route="data">Visualize</button>
          <button class="nav__link" data-route="test">Test</button>
          <button class="nav__link" data-route="research">Research</button>
          <button class="nav__link" data-route="about">About</button>
        </nav>

        <button class="nav__mobile-toggle" aria-label="Toggle navigation menu">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6"/>
            <line x1="3" y1="12" x2="21" y2="12"/>
            <line x1="3" y1="18" x2="21" y2="18"/>
          </svg>
        </button>
      </div>
    </header>

    <main class="container main">
      <!-- LEARN (Story 1) -->
      <section id="page-learn" class="page page--active" aria-labelledby="learn-title">
        <!-- Hero Section with Background Image -->
        <div class="learn-hero" style="
          position: relative;
          margin: -18px -16px 0 -16px;
          padding: 120px 40px 100px;
          background-image: url('https://www.philenews.com/wp-content/uploads/webp/2025/04/zero-sum-thinking.webp');
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
          overflow: hidden;
        ">
          <!-- Dark overlay for text readability -->
          <div style="
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.45) 0%, rgba(0, 0, 0, 0.35) 100%);
          "></div>
          
          <!-- Content -->
          <div style="position: relative; z-index: 1; max-width: 1040px; margin: 0 auto; text-align: center;">
            
            <h1 id="learn-title" style="
              margin: 0 0 40px 0;
              font-size: 48px;
              font-weight: 800;
              color: #fff;
              line-height: 1.2;
              text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            ">What is Zero-Sum Thinking?</h1>
            
            <div style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
              gap: 32px;
              max-width: 900px;
              margin: 0 auto;
            ">
              <!-- Core Concept Card -->
              <div style="
                background: rgba(30, 30, 30, 0.65);
                border: 1px solid rgba(255, 255, 255, 0.15);
                border-radius: 12px;
                padding: 24px;
                backdrop-filter: blur(12px);
                -webkit-backdrop-filter: blur(12px);
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
              ">
                <div style="
                  font-size: 13px;
                  font-weight: 800;
                  text-transform: uppercase;
                  letter-spacing: 1px;
                  color: #a51c30;
                  margin-bottom: 12px;
                ">Core Definition</div>
                <p style="
                  margin: 0;
                  font-size: 16px;
                  line-height: 1.7;
                  color: #f3f4f6;
                  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
                ">
                  The belief that gains for one individual or group tend to come at the cost of others.
                </p>
              </div>
              
              <!-- Why It Matters Card -->
              <div style="
                background: rgba(30, 30, 30, 0.65);
                border: 1px solid rgba(255, 255, 255, 0.15);
                border-radius: 12px;
                padding: 24px;
                backdrop-filter: blur(12px);
                -webkit-backdrop-filter: blur(12px);
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
              ">
                <div style="
                  font-size: 13px;
                  font-weight: 800;
                  text-transform: uppercase;
                  letter-spacing: 1px;
                  color: #a51c30;
                  margin-bottom: 12px;
                ">Why It Matters</div>
                <p style="
                  margin: 0;
                  font-size: 16px;
                  line-height: 1.7;
                  color: #f3f4f6;
                  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
                ">
                  This mindset shapes policy views on redistribution, affirmative action, and immigration‚Äîrooted in both personal and ancestral experiences.
                </p>
              </div>
            </div>
            
            <h2 style="
              margin: 40px 0 0 0;
              font-size: 48px;
              font-weight: 800;
              color: #fff;
              line-height: 1.2;
              text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            ">An Interactive Explainer, Data Dashboard, and Self-assessment</h2>
          </div>
        </div>

        <!-- Divider -->
        <div style="max-width: 1200px; margin: 20px auto; height: 1px; background: linear-gradient(90deg, transparent 0%, #e5e7eb 50%, transparent 100%);"></div>

        <!-- Main Content -->
        <div class="container main" style="padding-top: 16px;">
          <h2 style="margin-top: 0; margin-bottom: 16px; font-size: 20px; color: var(--text);">How to Use This Platform</h2>

          <div class="card" style="
            background: #ffffff; 
            border: none;
            border-left: 4px solid #a51c30;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
            border-radius: 8px;
            padding: 24px 28px;
          ">
            <h2 style="margin-top: 0; margin-bottom: 12px; color: var(--text); font-size: 20px;">Purpose of the Website</h2>
            <p style="margin-bottom: 16px; line-height: 1.6;">
              Ever wondered why people see the same issue so differently? This platform helps you understand zero-sum thinking‚Äîa mindset that shapes how we view politics, policy, and social change. Whether you're a student, educator, policymaker, or curious citizen, this site offers evidence-based insights into one of the most important divides in contemporary society.
            </p>

            <h2 style="margin-top: 20px; margin-bottom: 12px; color: var(--text); font-size: 20px;">What You Find on This Site</h2>
            <p class="muted" style="margin-bottom: 15px;">
              Navigate through the platform to explore different dimensions of zero-sum thinking:
            </p>
            <ul class="list">
              <li><strong><span style="cursor: pointer; color: #007bff; text-decoration: underline;" onclick="setRoute('learn')">Home:</span></strong> Understand the core concepts and how zero-sum thinking is measured.</li>
              <li><strong><span style="cursor: pointer; color: #007bff; text-decoration: underline;" onclick="setRoute('concept')">Learn:</span></strong> Play an interactive mini-game and watch animated explanations to build intuition.</li>
              <li><strong><span style="cursor: pointer; color: #007bff; text-decoration: underline;" onclick="setRoute('test')">Test:</span></strong> Answer questions about your own beliefs and see how you compare to the benchmark.</li>
              <li><strong><span style="cursor: pointer; color: #007bff; text-decoration: underline;" onclick="setRoute('data')">Visualization:</span></strong> Explore demographic patterns, policy correlations, and geographic distributions.</li>
            </ul>
          </div>

        </div>

        <!-- Research Overview Card -->
        <div class="card" style="
          background: #ffffff;
          border: none;
          border-left: 4px solid #a51c30;
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
          border-radius: 8px;
          padding: 24px 28px;
          margin-top: 2px;
        ">
          <h2 style="margin-bottom: 16px; color: var(--text); font-size: 20px;">Research Overview</h2>
          <p class="muted" style="margin-bottom: 16px;">
            This platform explores research by 
            <a href="https://sahilchinoy.com/" target="_blank" rel="noopener noreferrer" style="color: #007bff; text-decoration: underline; font-weight: 600;">Sahil Chinoy</a>, 
            <a href="https://nathannunn.arts.ubc.ca/" target="_blank" rel="noopener noreferrer" style="color: #007bff; text-decoration: underline; font-weight: 600;">Nathan Nunn</a>, 
            <a href="https://sites.google.com/view/sandramgsequeira/home" target="_blank" rel="noopener noreferrer" style="color: #007bff; text-decoration: underline; font-weight: 600;">Sandra Sequeira</a>, and 
            <a href="https://www.stefanie-stantcheva.com/" target="_blank" rel="noopener noreferrer" style="color: #007bff; text-decoration: underline; font-weight: 600;">Stefanie Stantcheva</a> 
            on zero-sum thinking and U.S. political divides.
          </p>
          <p style="margin-bottom: 12px;">
            <strong>Publication:</strong> Forthcoming at the <em>American Economic Review</em>
          </p>
          <p style="margin-bottom: 24px;">
            Zero-sum thinking - believing gains for one person mean losses for another - shapes political views. The study analyzes survey data from 20,000+ respondents to measure this mindset and its correlations.
          </p>
        </div>

        <!-- Research Resources Card -->
        <div class="card" style="
          background: #ffffff;
          border: none;
          border-left: 4px solid #a51c30;
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
          border-radius: 8px;
          padding: 24px 28px;
          margin-top: 2px;
        ">
          <h2 style="margin-bottom: 16px; color: var(--text); font-size: 20px;">Research Resources</h2>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
            <a href="https://socialeconomicslab.org/wp-content/uploads/2024/04/zero_sum_political_divides_OA.pdf" target="_blank" rel="noopener noreferrer" style="display: block; padding: 20px; background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border: 1px solid #e2e8f0; border-radius: 12px; text-decoration: none; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(0, 0, 0, 0.12)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.04)';">
              <div style="display: flex; align-items: center; margin-bottom: 12px;">
                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 12px; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                </div>
                <div style="font-weight: 600; color: #1e293b; font-size: 16px;">Full Paper</div>
              </div>
              <div style="font-size: 14px; color: #64748b; line-height: 1.4;">Open Access PDF of the complete research</div>
            </a>
            <a href="https://socialeconomicslab.org/wp-content/uploads/2024/04/Zero_Sum_Slides_compressed.pdf" target="_blank" rel="noopener noreferrer" style="display: block; padding: 20px; background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border: 1px solid #e2e8f0; border-radius: 12px; text-decoration: none; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(0, 0, 0, 0.12)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.04)';">
              <div style="display: flex; align-items: center; margin-bottom: 12px;">
                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 12px; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
                </div>
                <div style="font-weight: 600; color: #1e293b; font-size: 16px;">Presentation Slides</div>
              </div>
              <div style="font-size: 14px; color: #64748b; line-height: 1.4;">Visual overview of key findings</div>
            </a>
            <a href="https://socialeconomicslab.org/wp-content/uploads/2024/04/zero_sum_political_divides_Q.pdf" target="_blank" rel="noopener noreferrer" style="display: block; padding: 20px; background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border: 1px solid #e2e8f0; border-radius: 12px; text-decoration: none; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(0, 0, 0, 0.12)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.04)';">
              <div style="display: flex; align-items: center; margin-bottom: 12px;">
                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 12px; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line></svg>
                </div>
                <div style="font-weight: 600; color: #1e293b; font-size: 16px;">Survey Questionnaire</div>
              </div>
              <div style="font-size: 14px; color: #64748b; line-height: 1.4;">Complete survey instrument used</div>
            </a>
            <a href="https://x.com/s_stantcheva/status/1703765533571616809?s=46" target="_blank" rel="noopener noreferrer" style="display: block; padding: 20px; background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border: 1px solid #e2e8f0; border-radius: 12px; text-decoration: none; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(0, 0, 0, 0.12)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.04)';">
              <div style="display: flex; align-items: center; margin-bottom: 12px;">
                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 12px; box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                </div>
                <div style="font-weight: 600; color: #1e293b; font-size: 16px;">Twitter Thread</div>
              </div>
              <div style="font-size: 14px; color: #64748b; line-height: 1.4;">Concise research summary</div>
            </a>
          </div>
        </div>

        <!-- Divider -->
        <div style="max-width: 1200px; margin: 48px auto 0; height: 1px; background: linear-gradient(90deg, transparent 0%, #e5e7eb 50%, transparent 100%);"></div>

      </section>

      <!-- EXPLORE (Interactive) -->
      <section id="page-concept" class="page" aria-labelledby="explore-title">
        <h1 id="explore-title">Explore: Interactive Demonstrations</h1>

        <!-- Learning Path Guide -->
        <div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 24px; margin-bottom: 40px; overflow-x: auto;">
          <div style="display: flex; gap: 0; align-items: center; min-width: min-content; padding: 0 8px;">
            <!-- Step 1: Understand -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 140px;">
              <div style="width: 48px; height: 48px; background: #e5e7eb; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #6b7280; font-weight: 600; font-size: 18px;">
                ‚úì
              </div>
              <div style="text-align: center; font-size: 13px; font-weight: 600; color: #374151;">Understand</div>
              <div style="text-align: center; font-size: 12px; color: #9ca3af;">Concepts</div>
            </div>

            <!-- Arrow -->
            <div style="flex: 0 0 auto; color: #d1d5db; font-size: 24px; margin: 0 8px;">‚Üí</div>

            <!-- Step 2: Learn (Current) -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 140px;">
              <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #a51c30 0%, #8b1626 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 18px; box-shadow: 0 4px 12px rgba(165, 28, 48, 0.3);">
                2
              </div>
              <div style="text-align: center; font-size: 13px; font-weight: 600; color: #a51c30;">Learn</div>
              <div style="text-align: center; font-size: 12px; color: #9ca3af;">YOU ARE HERE</div>
            </div>

            <!-- Arrow -->
            <div style="flex: 0 0 auto; color: #d1d5db; font-size: 24px; margin: 0 8px;">‚Üí</div>

            <!-- Step 3: Test -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 140px; cursor: pointer; opacity: 0.7; transition: opacity 0.3s;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.7';" onclick="setRoute('test')">
              <div style="width: 48px; height: 48px; background: #f3f4f6; border: 2px solid #d1d5db; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #6b7280; font-weight: 600; font-size: 18px;">
                3
              </div>
              <div style="text-align: center; font-size: 13px; font-weight: 600; color: #374151;">Test</div>
              <div style="text-align: center; font-size: 12px; color: #9ca3af;">Self-Assess</div>
            </div>

            <!-- Arrow -->
            <div style="flex: 0 0 auto; color: #d1d5db; font-size: 24px; margin: 0 8px;">‚Üí</div>

            <!-- Step 4: Visualize -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 140px; cursor: pointer; opacity: 0.7; transition: opacity 0.3s;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.7';" onclick="setRoute('data')">
              <div style="width: 48px; height: 48px; background: #f3f4f6; border: 2px solid #d1d5db; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #6b7280; font-weight: 600; font-size: 18px;">
                4
              </div>
              <div style="text-align: center; font-size: 13px; font-weight: 600; color: #374151;">Visualize</div>
              <div style="text-align: center; font-size: 12px; color: #9ca3af;">Data Patterns</div>
            </div>
          </div>

          <!-- Progress Info -->
          <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e2e8f0; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
            <div>
              <div style="font-size: 12px; font-weight: 600; color: #a51c30; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Current Step</div>
              <p style="margin: 0; color: #374151; font-size: 14px;">Interactive game and visual examples to build intuition about zero-sum thinking.</p>
            </div>
            <div>
              <div style="font-size: 12px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Next Steps</div>
              <p style="margin: 0; color: #6b7280; font-size: 14px;">Take the test to assess your own zero-sum thinking score, then explore demographic patterns in the data.</p>
            </div>
          </div>
        </div>

        <!-- Introduction Cards -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-bottom: 40px;">
          <!-- Simple Example Card -->
          <div class="card">
            <h2 style="margin-top: 0; margin-bottom: 16px; color: var(--text);">A Simple Example: The Pie/Pizza</h2>
            <div style="space: 16px; line-height: 1.8;">
              <p style="margin-bottom: 14px; color: var(--text-light);">
                Imagine a pie shared by two groups.
              </p>
              
              <!-- Visual Diagrams -->
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                <!-- Zero-Sum -->
                <div style="text-align: center;">
                  <svg width="100%" height="140" viewBox="0 0 140 140" style="max-width: 100%;">
                    <!-- Zero-sum pie (fixed size) -->
                    <circle cx="70" cy="70" r="50" fill="#fce7e7" stroke="#ddd" stroke-width="1"/>
                    <!-- Red slice (40%) -->
                    <path d="M 70 70 L 70 20 A 50 50 0 0 1 110.36 39.64 Z" fill="#ef4444"/>
                    <!-- Blue slice (60%) -->
                    <path d="M 70 70 L 110.36 39.64 A 50 50 0 0 1 70 120 Z" fill="#3b82f6"/>
                    <!-- Labels -->
                    <text x="75" y="35" font-size="12" font-weight="600" fill="white">40%</text>
                    <text x="80" y="95" font-size="12" font-weight="600" fill="white">60%</text>
                  </svg>
                  <p style="margin: 8px 0 0 0; font-size: 12px; color: var(--text-light);">Fixed pie size</p>
                </div>
                
                <!-- Positive-Sum -->
                <div style="text-align: center;">
                  <svg width="100%" height="140" viewBox="0 0 140 140" style="max-width: 100%;">
                    <!-- Positive-sum pie (grows) -->
                    <circle cx="70" cy="70" r="60" fill="#e0f9f4" stroke="#ddd" stroke-width="1"/>
                    <!-- Red slice (40%) -->
                    <path d="M 70 70 L 70 10 A 60 60 0 0 1 120.96 36.36 Z" fill="#ef4444"/>
                    <!-- Blue slice (60%) -->
                    <path d="M 70 70 L 120.96 36.36 A 60 60 0 0 1 70 130 Z" fill="#10b981"/>
                    <!-- Labels -->
                    <text x="75" y="30" font-size="12" font-weight="600" fill="white">40%</text>
                    <text x="80" y="110" font-size="12" font-weight="600" fill="white">60%</text>
                    <!-- Growth indicator -->
                    <path d="M 130 30 L 145 15" stroke="#10b981" stroke-width="2" fill="none" stroke-linecap="round"/>
                    <path d="M 140 20 L 145 15 L 135 18" stroke="#10b981" stroke-width="2" fill="#10b981"/>
                  </svg>
                  <p style="margin: 8px 0 0 0; font-size: 12px; color: var(--text-light);">Pie can grow</p>
                </div>
              </div>
              
              <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 14px;">
                <p style="margin: 0 0 8px 0; color: var(--text); font-weight: 600;">üî¥ In zero-sum thinking:</p>
                <p style="margin: 0; color: var(--text-light); font-size: 14px;">The size of the pie never changes. If one group gets a larger slice, the other group must get a smaller one.</p>
              </div>
              <div style="background: #f0f8ff; padding: 16px; border-radius: 8px;">
                <p style="margin: 0 0 8px 0; color: var(--text); font-weight: 600;">üü¢ In shared-gains (positive-sum) thinking:</p>
                <p style="margin: 0; color: var(--text-light); font-size: 14px;">The pie itself can grow. Both groups can end up with larger slices, even if the shares are not equal.</p>
              </div>
              <p style="margin-top: 14px; padding-top: 14px; border-top: 1px solid #e5e7eb; color: var(--muted); font-size: 14px;">
                This example shows why zero-sum thinking focuses on competition over fixed resources, while other perspectives allow for cooperation, growth, or mutual benefit.
              </p>
            </div>
          </div>

          <!-- Common Examples Card -->
          <div class="card">
            <h2 style="margin-top: 0; margin-bottom: 16px; color: var(--text);">Common Examples in Debate</h2>
            <p style="margin-top: 0; margin-bottom: 16px; color: var(--text-light);">
              Zero-sum thinking often appears in debates about:
            </p>
            
            <!-- Example Grid with Icons -->
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 16px;">
              <!-- Jobs -->
              <div style="background: linear-gradient(135deg, #fef3c7 0%, #fef9e7 100%); border: 1px solid #fcd34d; border-radius: 8px; padding: 12px; display: flex; gap: 10px; align-items: flex-start;">
                <div style="font-size: 20px; flex-shrink: 0;">üíº</div>
                <div>
                  <p style="margin: 0 0 4px 0; font-weight: 600; font-size: 13px; color: var(--text);">Jobs</p>
                  <p style="margin: 0; font-size: 12px; color: var(--text-light); line-height: 1.4;">One group gets more jobs ‚Üí others lose out</p>
                </div>
              </div>
              
              <!-- Trade -->
              <div style="background: linear-gradient(135deg, #dbeafe 0%, #f0f9ff 100%); border: 1px solid #bfdbfe; border-radius: 8px; padding: 12px; display: flex; gap: 10px; align-items: flex-start;">
                <div style="font-size: 20px; flex-shrink: 0;">üåê</div>
                <div>
                  <p style="margin: 0 0 4px 0; font-weight: 600; font-size: 13px; color: var(--text);">Trade</p>
                  <p style="margin: 0; font-size: 12px; color: var(--text-light); line-height: 1.4;">One country gains ‚Üí another is harmed</p>
                </div>
              </div>
              
              <!-- Immigration -->
              <div style="background: linear-gradient(135deg, #f3e8ff 0%, #faf5ff 100%); border: 1px solid #e9d5ff; border-radius: 8px; padding: 12px; display: flex; gap: 10px; align-items: flex-start;">
                <div style="font-size: 20px; flex-shrink: 0;">üöÄ</div>
                <div>
                  <p style="margin: 0 0 4px 0; font-weight: 600; font-size: 13px; color: var(--text);">Immigration</p>
                  <p style="margin: 0; font-size: 12px; color: var(--text-light); line-height: 1.4;">Immigrant gains reduce citizen opportunities</p>
                </div>
              </div>
              
              <!-- Wealth -->
              <div style="background: linear-gradient(135deg, #fee2e2 0%, #fef2f2 100%); border: 1px solid #fecaca; border-radius: 8px; padding: 12px; display: flex; gap: 10px; align-items: flex-start;">
                <div style="font-size: 20px; flex-shrink: 0;">üí∞</div>
                <div>
                  <p style="margin: 0 0 4px 0; font-weight: 600; font-size: 13px; color: var(--text);">Income & Wealth</p>
                  <p style="margin: 0; font-size: 12px; color: var(--text-light); line-height: 1.4;">Some get richer ‚Üí others must get poorer</p>
                </div>
              </div>

              <!-- Education -->
              <div style="background: linear-gradient(135deg, #c7d2fe 0%, #e0e7ff 100%); border: 1px solid #a5b4fc; border-radius: 8px; padding: 12px; display: flex; gap: 10px; align-items: flex-start;">
                <div style="font-size: 20px; flex-shrink: 0;">üìö</div>
                <div>
                  <p style="margin: 0 0 4px 0; font-weight: 600; font-size: 13px; color: var(--text);">Education</p>
                  <p style="margin: 0; font-size: 12px; color: var(--text-light); line-height: 1.4;">Quality resources for some ‚Üí less for others</p>
                </div>
              </div>

              <!-- Climate -->
              <div style="background: linear-gradient(135deg, #ccfbf1 0%, #d1fae5 100%); border: 1px solid #99f6e4; border-radius: 8px; padding: 12px; display: flex; gap: 10px; align-items: flex-start;">
                <div style="font-size: 20px; flex-shrink: 0;">üåç</div>
                <div>
                  <p style="margin: 0 0 4px 0; font-weight: 600; font-size: 13px; color: var(--text);">Climate Action</p>
                  <p style="margin: 0; font-size: 12px; color: var(--text-light); line-height: 1.4;">Environment vs economic development tradeoff</p>
                </div>
              </div>
            </div>

            <!-- Key Insight Box -->
            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fff7ed 100%); border-left: 4px solid #f59e0b; border-radius: 8px; padding: 14px; margin-bottom: 12px;">
              <p style="margin: 0; font-size: 13px; color: #78350f;">
                <strong style="color: #a16207;">üí° Key Insight:</strong> Each of these debates involves real tradeoffs, but zero-sum thinking can make people overlook creative solutions that could benefit multiple groups simultaneously.
              </p>
            </div>
            
            <p style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #e5e7eb; color: var(--muted); font-size: 14px;">
              These beliefs shape how people interpret social and economic change, even when the actual outcomes may be more complex.
            </p>
          </div>
        </div>

        <div class="card">
          <h2>Mini game (2-minute intuition demo)</h2>
          <p class="muted">
            You and a competitor are fighting for market share. Choose to compete fiercely or collaborate. See how your mindset affects the outcome over 3 rounds.
          </p>

          <!-- How to Play Section -->
          <div style="background: linear-gradient(135deg, #f0f4ff 0%, #f9fafb 100%); border: 1px solid #e0e7ff; border-radius: 8px; padding: 20px; margin-bottom: 24px;">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
              <div>
                <div style="font-weight: 600; color: #a51c30; margin-bottom: 8px; font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px;">üéØ Game Objective</div>
                <p style="margin: 0; color: #4b5563; font-size: 14px; line-height: 1.6;">
                  Maximize your profits across 3 rounds by choosing between aggressive competition or collaboration.
                </p>
              </div>
              <div>
                <div style="font-weight: 600; color: #a51c30; margin-bottom: 8px; font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px;">‚ö° What You'll Learn</div>
                <p style="margin: 0; color: #4b5563; font-size: 14px; line-height: 1.6;">
                  Experience how zero-sum vs. positive-sum mindsets lead to different outcomes and consequences.
                </p>
              </div>
              <div>
                <div style="font-weight: 600; color: #a51c30; margin-bottom: 8px; font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px;">‚è±Ô∏è Time Required</div>
                <p style="margin: 0; color: #4b5563; font-size: 14px; line-height: 1.6;">
                  2 minutes to complete. Quick, interactive, and immediately insightful.
                </p>
              </div>
            </div>
          </div>

          <div id="game-container" style="margin-top: 24px;">
            <!-- Game State: Not Started -->
            <div id="game-start" style="text-align: center; padding: 24px; background: linear-gradient(135deg, #f0f4ff 0%, #f9fafb 100%); border-radius: 8px;">
              <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px; color: var(--text);">Choose Your Strategy</div>
              <p style="color: var(--text-muted); margin-bottom: 24px;">What's your approach to competition?</p>
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <button class="btn" id="start-zero-sum" type="button" style="padding: 16px;">
                  <div style="font-weight: 700;">‚öîÔ∏è Compete Hard</div>
                  <div style="font-size: 12px; opacity: 0.8; margin-top: 4px;">I win, you lose</div>
                </button>
                <button class="btn" id="start-positive-sum" type="button" style="padding: 16px;">
                  <div style="font-weight: 700;">ü§ù Collaborate</div>
                  <div style="font-size: 12px; opacity: 0.8; margin-top: 4px;">We both gain</div>
                </button>
              </div>
            </div>

            <!-- Game State: Playing -->
            <div id="game-playing" style="display: none;">
              <!-- Round Info -->
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 2px solid var(--border-light);">
                <div>
                  <div style="font-size: 12px; color: var(--text-muted); text-transform: uppercase; font-weight: 700;">Round</div>
                  <div style="font-size: 24px; font-weight: 800;" id="round-number">1</div>
                </div>
                <div style="text-align: center;">
                  <div style="font-size: 12px; color: var(--text-muted); text-transform: uppercase; font-weight: 700;">Score</div>
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 8px;">
                    <div>
                      <div style="font-size: 18px; font-weight: 800; color: #3b82f6;">YOU <span id="your-score">0</span></div>
                    </div>
                    <div>
                      <div style="font-size: 18px; font-weight: 800; color: #a855f7;">THEM <span id="their-score">0</span></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Choice Phase -->
              <div id="choice-phase">
                <div style="margin-bottom: 16px;">
                  <div style="font-weight: 700; margin-bottom: 12px; color: var(--text);">What's your move?</div>
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <button class="btn" id="choice-compete" type="button" style="padding: 16px; text-align: left;">
                      <div style="font-weight: 700;">‚öîÔ∏è Compete</div>
                      <div style="font-size: 12px; opacity: 0.8; margin-top: 4px;">Aggressive pricing, big ad spend</div>
                    </button>
                    <button class="btn btn--ghost" id="choice-collab" type="button" style="padding: 16px; text-align: left;">
                      <div style="font-weight: 700;">ü§ù Collaborate</div>
                      <div style="font-size: 12px; opacity: 0.8; margin-top: 4px;">Share market, grow together</div>
                    </button>
                  </div>
                </div>
              </div>

              <!-- Result Phase -->
              <div id="result-phase" style="display: none;">
                <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                    <!-- Your Move -->
                    <div style="text-align: center;">
                      <div style="font-size: 12px; color: var(--text-muted); text-transform: uppercase; font-weight: 700; margin-bottom: 8px;">YOU CHOSE</div>
                      <div id="your-move-display" style="font-size: 24px; font-weight: 800;">‚öîÔ∏è</div>
                    </div>
                    <!-- Their Move -->
                    <div style="text-align: center;">
                      <div style="font-size: 12px; color: var(--text-muted); text-transform: uppercase; font-weight: 700; margin-bottom: 8px;">THEY CHOSE</div>
                      <div id="their-move-display" style="font-size: 24px; font-weight: 800;">‚öîÔ∏è</div>
                    </div>
                  </div>

                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div style="background: rgba(59, 130, 246, 0.2); border-radius: 6px; padding: 12px; text-align: center;">
                      <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 6px;">YOU GET</div>
                      <div style="font-size: 28px; font-weight: 800; color: #3b82f6;" id="round-your-gain">+5</div>
                    </div>
                    <div style="background: rgba(168, 85, 247, 0.2); border-radius: 6px; padding: 12px; text-align: center;">
                      <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 6px;">THEY GET</div>
                      <div style="font-size: 28px; font-weight: 800; color: #a855f7;" id="round-their-gain">+5</div>
                    </div>
                  </div>

                  <div style="margin-top: 16px; padding: 12px; background: rgba(249, 115, 22, 0.1); border-left: 4px solid #f97316; border-radius: 4px;">
                    <div style="font-size: 13px; color: var(--text); line-height: 1.6;" id="round-insight">
                      <strong style="color: #f97316;">üí°</strong> Both cooperated! Market grows for everyone.
                    </div>
                  </div>
                </div>

                <button class="btn" id="next-round-btn" type="button" style="width: 100%;">Next Round ‚Üí</button>
              </div>
            </div>

            <!-- Game State: Results -->
            <div id="game-results" style="display: none;">
              <div style="text-align: center; padding: 24px; background: linear-gradient(135deg, #f0f4ff 0%, #f9fafb 100%); border-radius: 8px;">
                <div style="font-size: 14px; color: var(--muted); text-transform: uppercase; font-weight: 700; margin-bottom: 16px;">Game Over!</div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">
                  <div style="background: rgba(59, 130, 246, 0.15); border-radius: 8px; padding: 16px;">
                    <div style="font-size: 12px; color: var(--muted); margin-bottom: 8px;">YOUR TOTAL</div>
                    <div style="font-size: 36px; font-weight: 800; color: #3b82f6;" id="final-your-score">0</div>
                  </div>
                  <div style="background: rgba(168, 85, 247, 0.15); border-radius: 8px; padding: 16px;">
                    <div style="font-size: 12px; color: var(--muted); margin-bottom: 8px;">THEIR TOTAL</div>
                    <div style="font-size: 36px; font-weight: 800; color: #a855f7;" id="final-their-score">0</div>
                  </div>
                </div>

                <div id="game-conclusion" style="margin-bottom: 24px; padding: 16px; background: white; border-radius: 8px; border-left: 4px solid #10b981;">
                  <div style="font-size: 16px; font-weight: 700; margin-bottom: 8px;">üéØ Key Takeaway</div>
                  <div id="conclusion-text" style="font-size: 14px; color: var(--text); line-height: 1.6;"></div>
                </div>

                <!-- Reflection Questions -->
                <div style="background: linear-gradient(135deg, #fef3c7 0%, #fef9e7 100%); border: 1px solid #fcd34d; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                  <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                    <div style="font-size: 24px;">üí≠</div>
                    <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: #92400e;">Reflection Questions</h3>
                  </div>
                  
                  <div style="space: 16px;">
                    <div style="background: white; border-radius: 8px; padding: 12px; margin-bottom: 12px;">
                      <p style="margin: 0; font-size: 14px; color: #78350f; line-height: 1.6;">
                        <strong>‚ùì What was your initial strategy?</strong><br/>
                        <span style="color: #92400e;">Did you tend to compete or collaborate? Why?</span>
                      </p>
                    </div>
                    
                    <div style="background: white; border-radius: 8px; padding: 12px; margin-bottom: 12px;">
                      <p style="margin: 0; font-size: 14px; color: #78350f; line-height: 1.6;">
                        <strong>‚ùì Did the outcome match your expectations?</strong><br/>
                        <span style="color: #92400e;">What surprised you about how the game unfolded?</span>
                      </p>
                    </div>
                    
                    <div style="background: white; border-radius: 8px; padding: 12px; margin-bottom: 12px;">
                      <p style="margin: 0; font-size: 14px; color: #78350f; line-height: 1.6;">
                        <strong>‚ùì How does this relate to real-world decisions?</strong><br/>
                        <span style="color: #92400e;">Think about policy debates you've encountered recently‚Äîcan you see zero-sum thinking at play?</span>
                      </p>
                    </div>

                    <div style="background: white; border-radius: 8px; padding: 12px;">
                      <p style="margin: 0; font-size: 14px; color: #78350f; line-height: 1.6;">
                        <strong>‚ùì Could a different mindset have changed the result?</strong><br/>
                        <span style="color: #92400e;">What would happen if both players focused on shared gains instead?</span>
                      </p>
                    </div>
                  </div>

                  <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #fcd34d;">
                    <p style="margin: 0; font-size: 13px; color: #92400e; font-weight: 600;">
                      üí° Tip: These questions don't have "right" answers. The goal is to understand how your mindset shapes your choices and their consequences.
                    </p>
                  </div>
                </div>

                <button class="btn" id="play-again-btn" type="button" style="width: 100%; padding: 16px;">Play Again</button>
              </div>
            </div>
          </div>
        </div>

        <div class="card video-card">
          <div class="video-header">
            <span class="video-badge">üé¨ Video</span>
            <h2>Animated Explanation</h2>
          </div>
          <p class="video-description">
            Watch this short video to understand the concept of zero-sum thinking and how it affects our everyday decisions.
          </p>

          <div class="video-container">
            <iframe
              class="video-frame"
              src="https://www.youtube.com/embed/jeASPXeIxQQ"
              title="Zero-sum thinking explainer"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
            ></iframe>
          </div>

          <div class="video-footer">
            <span class="video-source">üì∫ Source: YouTube</span>
          </div>
        </div>
      </section>

      <!-- THE RESEARCH -->
      <section id="page-research" class="page" aria-labelledby="research-title">
        <h1 id="research-title">The Research</h1>

        <div class="card">
          <h2>Purpose of the Study</h2>
          <p>The study "Zero-Sum Thinking and the Roots of U.S. Political Differences" investigates how beliefs about gains and losses shape political attitudes in the United States. Rather than focusing only on material interests or partisan identities, the research examines a deeper cognitive framework: whether individuals tend to see social and economic outcomes as zero-sum or as allowing for shared gains.</p>
          <p>The central claim is that zero-sum thinking is a measurable mindset that helps explain persistent political disagreement across a wide range of policy areas.</p>

          <h2>How Zero-Sum Thinking Is Measured</h2>
          <p>The study measures zero-sum thinking using survey questions designed to capture respondents' beliefs about whether gains for one group come at the expense of others.</p>
          <p>Respondents are asked to indicate their level of agreement with statements expressing zero-sum views across different social and economic domains. Higher agreement with these statements indicates a stronger zero-sum orientation.</p>

          <h2>Domains Covered</h2>
          <p>Zero-sum thinking is measured across multiple domains, including:</p>
          <ul>
            <li>Ethnic and social groups: Beliefs about whether gains for one group imply losses for others.</li>
            <li>International trade: Beliefs about whether economic gains from trade are necessarily offset by losses elsewhere.</li>
            <li>Income and economic groups: Beliefs about whether increases in wealth for some groups require others to become worse off.</li>
            <li>Citizens and non-citizens: Beliefs about competition over economic opportunities and resources.</li>
          </ul>
          <p>Measuring multiple domains allowed the researchers to assess whether zero-sum thinking reflects a general mindset rather than issue-specific opinions.</p>

          <h2>From Survey Responses to an Index</h2>
          <p>Individual responses are combined into a standardized zero-sum thinking index, typically scaled from low to high values. Higher scores indicate a stronger tendency to view social and economic outcomes as zero-sum.</p>
          <p>The index construction follows standard practices in survey research, ensuring internal consistency and comparability across respondents.</p>
          <p>Details on question wording, scaling, and validation are provided in the original paper and its supplementary materials.</p>

          <h2>How to Interpret the Zero-Sum Thinking Index</h2>
          <p>The zero-sum thinking index is scaled so that higher values indicate a stronger tendency to view social and economic outcomes as zero-sum, meaning that gains for one group are perceived as coming at the expense of others. Lower values indicate a weaker zero-sum orientation and a greater openness to the possibility of shared gains.</p>

          <h2>Data Transparency</h2>
          <p>This website presents aggregated results only, based on the published study and its associated materials. Individual-level data are not displayed or stored here.</p>
          <p>For full methodological details, replication materials, and technical discussion, users are encouraged to consult the original publication and its appendices.</p>
        </div>
      </section>

      <!-- TEST (Story 2) -->
      <section id="page-test" class="page" aria-labelledby="test-title">
        <div class="test-header" style="margin-bottom: 32px;">
          <h1 id="test-title" style="margin-bottom: 8px;">Measure Your Zero-Sum Thinking</h1>
          <p class="muted" style="max-width: 700px;">
            Answer 4 questions to calculate your zero-sum thinking score and compare with ~20,000 U.S. respondents from the paper:
            <span style="font-style: italic;">Zero-Sum Thinking and the Roots of U.S. Political Divides</span> <span style="font-size: 13px; color: var(--muted);">(Chinoy, Nunn, Sequeira, &amp; Stantcheva, <em>American Economic Review</em>, 2024)</span>.
          </p>
        </div>

        <div class="card">
          <h2 style="margin-bottom: 8px;">Survey Questions</h2>
          <p class="muted" style="margin-bottom: 24px;">Please indicate how much you agree with each statement.</p>

          <form id="survey-form" class="survey" autocomplete="off">
            <fieldset class="q" style="margin-bottom: 24px; padding: 24px; background: #fff; border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
              <legend style="font-weight: 700; font-size: 16px; margin-bottom: 16px; line-height: 1.6; color: var(--text);"><span class="q-num" style="color: #fff; background: #a51c30; padding: 4px 12px; border-radius: 6px; margin-right: 12px; font-size: 14px;">Q1</span> If an ethnic group becomes richer, this comes at the expense of other groups.</legend>
              <div class="choices" data-q="ethnic"></div>
            </fieldset>

            <fieldset class="q" style="margin-bottom: 24px; padding: 24px; background: #fff; border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
              <legend style="font-weight: 700; font-size: 16px; margin-bottom: 16px; line-height: 1.6; color: var(--text);"><span class="q-num" style="color: #fff; background: #a51c30; padding: 4px 12px; border-radius: 6px; margin-right: 12px; font-size: 14px;">Q2</span> In international trade, if one country makes more money, then the other makes less.</legend>
              <div class="choices" data-q="trade"></div>
            </fieldset>

            <fieldset class="q" style="margin-bottom: 24px; padding: 24px; background: #fff; border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
              <legend style="font-weight: 700; font-size: 16px; margin-bottom: 16px; line-height: 1.6; color: var(--text);"><span class="q-num" style="color: #fff; background: #a51c30; padding: 4px 12px; border-radius: 6px; margin-right: 12px; font-size: 14px;">Q3</span> If non-U.S. citizens do better economically, this is at the expense of citizens.</legend>
              <div class="choices" data-q="citizen"></div>
            </fieldset>

            <fieldset class="q" style="margin-bottom: 24px; padding: 24px; background: #fff; border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
              <legend style="font-weight: 700; font-size: 16px; margin-bottom: 16px; line-height: 1.6; color: var(--text);"><span class="q-num" style="color: #fff; background: #a51c30; padding: 4px 12px; border-radius: 6px; margin-right: 12px; font-size: 14px;">Q4</span> If one income class becomes wealthier, it is at the expense of others.</legend>
              <div class="choices" data-q="income"></div>
            </fieldset>

            <div class="row" style="display: flex; gap: 10px; justify-content: center; margin-top: 28px;">
              <button class="btn" type="button" id="compute-btn" style="padding: 10px 20px; font-size: 13px; font-weight: 500; background: #a51c30; border-color: #a51c30; color: #fff; border-radius: 6px;">Calculate My Score</button>
              <button class="btn btn--ghost" type="button" id="reset-btn" style="padding: 10px 16px; font-size: 13px; font-weight: 500; border-radius: 6px;">Reset</button>
            </div>
          </form>
        </div>

        <div id="test-results" class="card" style="display: none;">
          <h2 style="margin-bottom: 24px;">Your Results</h2>
          
          <!-- 1Ô∏è‚É£ PRIMARY: Percentile-based main conclusion -->
          <div id="main-conclusion-box" style="text-align: center; padding: 32px; background: linear-gradient(135deg, #f0f9ff 0%, #e0f7fa 100%); border-radius: 12px; margin-bottom: 24px; border: 2px solid rgba(6, 182, 212, 0.3);">
            <div id="main-conclusion-text" style="font-size: 22px; font-weight: 700; color: var(--text); margin-bottom: 12px; line-height: 1.4;">
              <!-- Dynamically set: "You are less/more zero-sum than most people." -->
            </div>
            <div id="percentile-text" style="font-size: 16px; color: var(--text); margin-bottom: 16px;">
              <!-- Dynamically set: "You score higher than X% of respondents..." -->
            </div>
            <div style="font-size: 13px; color: var(--muted);">
              (This corresponds to a score of <strong><span id="score-inline">--</span></strong> on a 0‚Äì100 scale)
            </div>
          </div>

          <!-- 2Ô∏è‚É£ Score explanation (what does this number mean) -->
          <div style="padding: 16px; background: #f9fafb; border-radius: 10px; margin-bottom: 24px;">
            <div style="font-size: 13px; font-weight: 600; color: var(--text); margin-bottom: 8px;">üìä What does this score mean?</div>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; text-align: center; margin-bottom: 12px;">
              <div style="padding: 10px; background: rgba(59, 130, 246, 0.1); border-radius: 6px;">
                <div style="font-size: 20px; font-weight: 700; color: #2563eb;">0</div>
                <div style="font-size: 11px; color: var(--muted);">Least zero-sum</div>
              </div>
              <div style="padding: 10px; background: rgba(245, 158, 11, 0.1); border-radius: 6px;">
                <div style="font-size: 20px; font-weight: 700; color: #d97706;">50</div>
                <div style="font-size: 11px; color: var(--muted);">Middle</div>
              </div>
              <div style="padding: 10px; background: rgba(239, 68, 68, 0.1); border-radius: 6px;">
                <div style="font-size: 20px; font-weight: 700; color: #dc2626;">100</div>
                <div style="font-size: 11px; color: var(--muted);">Most zero-sum</div>
              </div>
            </div>
            <div style="font-size: 12px; color: var(--muted); text-align: center;">
              Most people score between <strong>30</strong> and <strong>70</strong>.
            </div>
          </div>

          <!-- 3Ô∏è‚É£ Interpretive category (with clarification) -->
          <div id="interpretation-box" style="padding: 20px; border-left: 4px solid #a51c30; background: #fff; border-radius: 0 10px 10px 0; margin-bottom: 24px;">
            <div style="font-size: 11px; color: var(--muted); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px;">Interpretive Category (for readability)</div>
            <div id="interpretation-level" style="font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: #a51c30; margin-bottom: 6px;"></div>
            <div id="interpretation-title" style="font-size: 18px; font-weight: 700; margin-bottom: 10px;"></div>
            <p id="interpretation-desc" style="margin: 0 0 12px 0; color: var(--text-light); line-height: 1.6; font-size: 14px;"></p>
            <div style="font-size: 11px; color: var(--muted); padding: 8px 10px; background: rgba(0,0,0,0.03); border-radius: 4px;">
              ‚ö†Ô∏è This label summarizes your score range. It is not a diagnosis or a sharp cutoff.
            </div>
          </div>

          <!-- 4Ô∏è‚É£ Distribution chart with reading guide -->
          <div style="margin-bottom: 24px;">
            <h3 style="font-size: 16px; margin-bottom: 8px;">Your Position in the U.S. Sample</h3>
            <div style="font-size: 12px; color: var(--muted); margin-bottom: 12px; padding: 10px; background: rgba(6, 182, 212, 0.05); border-radius: 6px;">
              <strong>How to read this chart:</strong> Each bar shows how many people received a similar score. 
              <span style="color: #3b82f6; font-weight: 600;">Blue bars</span> = people who scored lower than you. 
              <span style="color: #8b5cf6; font-weight: 600;">Purple bars</span> = people who scored higher. 
              The <span style="color: #f97316; font-weight: 600;">orange bar</span> marks where you fall.
            </div>
            <div class="distribution-chart-wrapper"><canvas id="distribution-chart"></canvas></div>
          </div>

          <!-- 5Ô∏è‚É£ TL;DR Summary box (most important for users) -->
          <div id="tldr-box" style="padding: 20px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.02) 100%); border-radius: 10px; border-left: 4px solid #10b981; margin-bottom: 24px;">
            <div style="font-size: 13px; font-weight: 700; color: #059669; margin-bottom: 8px;">üí° In Plain Terms</div>
            <p id="tldr-text" style="margin: 0; font-size: 15px; color: var(--text); line-height: 1.6;">
              <!-- Dynamically set: "Compared to about X out of 4 people in the study, you are less/more likely to see the world as zero-sum." -->
            </p>
          </div>

          <!-- 6Ô∏è‚É£ Sample statistics (reframed as explanatory) -->
          <div style="padding: 16px; background: #f9fafb; border-radius: 10px; margin-bottom: 12px;">
            <div style="font-size: 12px; font-weight: 600; color: var(--muted); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.5px;">About the Reference Sample</div>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px;">
              <div style="padding: 12px; background: #fff; border-radius: 8px; border: 1px solid var(--border);">
                <div style="font-size: 11px; color: var(--muted); margin-bottom: 4px;">Sample Size</div>
                <div style="font-size: 18px; font-weight: 700;">20,352</div>
                <div style="font-size: 10px; color: var(--muted);">U.S. respondents</div>
              </div>
              <div style="padding: 12px; background: #fff; border-radius: 8px; border: 1px solid var(--border);">
                <div style="font-size: 11px; color: var(--muted); margin-bottom: 4px;">Typical Score</div>
                <div style="font-size: 18px; font-weight: 700;">50</div>
                <div style="font-size: 10px; color: var(--muted);">middle of the sample</div>
              </div>
              <div style="padding: 12px; background: #fff; border-radius: 8px; border: 1px solid var(--border);">
                <div style="font-size: 11px; color: var(--muted); margin-bottom: 4px;">Lower Quarter</div>
                <div style="font-size: 18px; font-weight: 700;">below 38</div>
                <div style="font-size: 10px; color: var(--muted);">25% scored here</div>
              </div>
              <div style="padding: 12px; background: #fff; border-radius: 8px; border: 1px solid var(--border);">
                <div style="font-size: 11px; color: var(--muted); margin-bottom: 4px;">Upper Quarter</div>
                <div style="font-size: 18px; font-weight: 700;">above 65</div>
                <div style="font-size: 10px; color: var(--muted);">25% scored here</div>
              </div>
            </div>
            <div style="margin-top: 10px; font-size: 11px; color: var(--muted); text-align: center;">
              These numbers describe the overall sample, not individual performance.
            </div>
          </div>

          <div style="padding: 12px 16px; background: #f9fafb; border-radius: 8px; font-size: 12px; color: var(--muted); border-left: 3px solid #a51c30;">
            <strong>Note:</strong> The sample size (20,352) is based on careful data cleaning: only respondents who completed the full survey, spent at least 10 minutes answering, and (for Wave 7) passed the attention check are included. This ensures the results reflect high-quality, reliable responses.
          </div>

          <!-- Methodology Explanation Card (Collapsible) - At the end for interested users -->
          <div style="margin-top: 24px; padding: 16px; border: 1px dashed var(--border); border-radius: 10px; background: linear-gradient(135deg, rgba(6, 182, 212, 0.02) 0%, rgba(255, 255, 255, 0) 100%);">
            <div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;" onclick="toggleMethodology()">
              <div style="display: flex; align-items: center; gap: 12px;">
                <div style="width: 36px; height: 36px; background: rgba(6, 182, 212, 0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#06b6d4" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 16v-4m0-4h.01"></path>
                  </svg>
                </div>
                <div>
                  <h3 style="margin: 0; font-size: 14px; color: var(--text); font-weight: 600;">üîç Curious about the calculation method?</h3>
                  <p style="margin: 2px 0 0 0; font-size: 11px; color: var(--muted);">Click to learn how the Zero-Sum Index is constructed using PCA</p>
                </div>
              </div>
              <div id="methodology-toggle-icon" style="transition: transform 0.3s ease; color: var(--muted);">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
              </div>
            </div>
            
            <div id="methodology-content" style="display: none; margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(6, 182, 212, 0.2);">
              <!-- Step 1: Survey Questions -->
              <div style="margin-bottom: 20px;">
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                  <span style="background: #06b6d4; color: white; font-size: 11px; font-weight: 700; padding: 3px 8px; border-radius: 16px;">Step 1</span>
                  <h4 style="margin: 0; font-size: 13px; font-weight: 600;">Survey Questions</h4>
                </div>
                <p style="margin: 0 0 10px 0; font-size: 12px; color: var(--text); line-height: 1.5;">
                  You answered <strong>four statements</strong> on a 1‚Äì5 scale, each capturing whether you believe gains for one group come at the expense of another.
                </p>
              </div>

              <!-- Step 2: Why PCA -->
              <div style="margin-bottom: 20px;">
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                  <span style="background: #06b6d4; color: white; font-size: 11px; font-weight: 700; padding: 3px 8px; border-radius: 16px;">Step 2</span>
                  <h4 style="margin: 0; font-size: 13px; font-weight: 600;">PCA Weighting</h4>
                </div>
                <p style="margin: 0; font-size: 12px; color: var(--text); line-height: 1.5;">
                  Instead of equal weights, <strong>Principal Component Analysis (PCA)</strong> identifies the common pattern across all four questions and creates data-driven weights.
                </p>
              </div>

              <!-- Step 3: Normalization -->
              <div style="margin-bottom: 16px;">
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                  <span style="background: #06b6d4; color: white; font-size: 11px; font-weight: 700; padding: 3px 8px; border-radius: 16px;">Step 3</span>
                  <h4 style="margin: 0; font-size: 13px; font-weight: 600;">Normalization to 0‚Äì100</h4>
                </div>
                <p style="margin: 0; font-size: 12px; color: var(--text); line-height: 1.5;">
                  The weighted sum is normalized so that <strong>0 = least zero-sum</strong> and <strong>100 = most zero-sum</strong>.
                </p>
              </div>

              <!-- Important Note -->
              <div style="padding: 10px; background: rgba(139, 92, 246, 0.06); border-radius: 6px; border-left: 3px solid #8b5cf6;">
                <p style="margin: 0; font-size: 11px; color: var(--text); line-height: 1.5;">
                  <strong>Note:</strong> This index reflects correlation across responses, not causality. It summarizes patterns in answers based on methods from the original research paper.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- VISUALIZATION (Story 3) -->
      <section id="page-data" class="page" aria-labelledby="viz-title">
        <h1 id="viz-title">Visualization: Explore Zero-Sum Thinking Patterns</h1>

        <!-- Tab navigation -->
        <div style="display: flex; gap: 8px; margin-bottom: 16px; border-bottom: 1px solid var(--border); padding-bottom: 8px;">
          <button class="tab-btn tab-btn--active" data-tab="demographic-patterns">Demographic Patterns</button>
          <button class="tab-btn" data-tab="policy-indices">Policy Indices</button>
          <button class="tab-btn" data-tab="geographic-map">Geographic Map</button>
        </div>

        <!-- TAB 1: Demographic Patterns -->
        <div id="tab-demographic-patterns" class="tab-content tab-content--active">
          <div class="card">
            <h2>Demographic Patterns Viewer</h2>
            <p class="muted">
              Explore how zero-sum thinking varies across demographic groups. The bar chart shows average index values (0‚Äì1 scale) for each category, where higher scores indicate stronger zero-sum beliefs.
            </p>
          </div>

          <div class="card">
            <h2>Select demographic variable (X-axis)</h2>
            <select id="demo-select" class="select">
              <option value="age">Age Group</option>
              <option value="gender">Gender</option>
              <option value="race">Race/Ethnicity</option>
              <option value="education">Education Level</option>
              <option value="income">Relative Income</option>
              <option value="hhIncome">Household Income</option>
              <option value="party">Party Affiliation</option>
              <option value="partyDetail">Party Affiliation (Detailed)</option>
              <option value="urbanicity">Urbanicity</option>
              <option value="immigrationStatus">Immigration Status</option>
            </select>
            <div id="variable-note" class="muted" style="margin-top: 8px; font-size: 12px; display: none;"></div>
          </div>

          <div class="card">
            <h2 id="chart-title">Zero-Sum Thinking by Age Group</h2>
            <p id="chart-subtitle" class="muted" style="margin-top: -8px; margin-bottom: 16px; font-size: 14px;">Average zero-sum thinking index (0‚Äì1 scale) across different age groups. Higher values indicate stronger zero-sum beliefs.</p>
            <div style="display: flex; gap: 20px;">
              <div style="flex: 1;">
                <div id="d3-chart-container" style="width: 100%; min-height: 400px;"></div>
                <div id="chart-info" class="muted" style="margin-top: 1rem;"></div>
                <div id="missing-data-info" style="margin-top: 8px; padding: 10px 14px; background: rgba(108, 117, 125, 0.08); border-radius: 6px; font-size: 12px; color: var(--muted); display: none;"></div>
              </div>
              <div style="flex: 0 0 250px; border-left: 1px solid var(--border); padding-left: 16px;">
                <h3 style="margin-top: 0; font-size: 14px;">Filters</h3>
                <div id="filters-panel"></div>
                <button id="reset-filters-btn" class="btn btn--ghost" style="margin-top: 1rem; width: 100%; font-size: 12px;">Reset Filters</button>
              </div>
            </div>
          </div>
        </div>

        <!-- TAB 2: Policy Indices -->
        <div id="tab-policy-indices" class="tab-content">
          <div class="card">
            <h2>Policy Index Viewer</h2>
            <p class="muted">
              Four policy indices are constructed from survey responses to capture beliefs about resource competition in different policy domains.
              All indices are normalized (0‚Äì1), where higher scores indicate stronger zero-sum thinking in that domain.
            </p>
          </div>

          <!-- Sub-tabs for policy indices -->
          <div style="display: flex; gap: 8px; margin-bottom: 16px; border-bottom: 1px solid var(--border); padding-bottom: 8px; padding-left: 8px;">
            <button class="sub-tab-btn sub-tab-btn--active" data-sub-tab="distribution">Distribution</button>
            <button class="sub-tab-btn" data-sub-tab="correlation">Correlation Plot</button>
          </div>

          <!-- Distribution tab -->
          <div id="sub-tab-distribution" class="sub-tab-content sub-tab-content--active">
            <div class="card">
              <h2>Select a policy index</h2>
              <select id="policy-select" class="select">
                <option value="redistIndex">Pro-Redistribution Index</option>
                <option value="raceIndex">Race Attitudes Index</option>
                <option value="immigIndex">Anti-Immigration Index</option>
                <option value="womenIndex">Gender Attitudes Index</option>
              </select>
            </div>

            <div class="card">
              <h2 id="policy-title">Pro-Redistribution Index</h2>
              <p id="policy-description" class="muted"></p>
              <div style="display: flex; justify-content: center; margin-top: 16px;">
                <div style="display: grid; grid-template-columns: auto auto; gap: 48px; align-items: center;">
                  <div class="policy-chart-wrapper" style="width: 500px; min-height: 350px;">
                    <canvas id="policy-chart-container"></canvas>
                  </div>
                  <div style="display: flex; flex-direction: column; justify-content: center;">
                    <h3 style="margin-top: 0; font-size: 14px;">Summary Statistics</h3>
                    <div id="policy-stats" style="font-size: 14px; line-height: 1.8;">
                      <div><strong>Mean:</strong> <span id="policy-mean">‚Äî</span></div>
                      <div><strong>Median:</strong> <span id="policy-median">‚Äî</span></div>
                      <div><strong>Std Dev:</strong> <span id="policy-stddev">‚Äî</span></div>
                      <div><strong>Range:</strong> <span id="policy-range">‚Äî</span></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Correlation tab -->
          <div id="sub-tab-correlation" class="sub-tab-content">
            <div class="card">
              <h2>Select a policy index</h2>
              <select id="policy-select-scatter" class="select">
                <option value="redistIndex">Pro-Redistribution Index</option>
                <option value="raceIndex">Race Attitudes Index</option>
                <option value="immigIndex">Anti-Immigration Index</option>
                <option value="womenIndex">Gender Attitudes Index</option>
              </select>
            </div>

            <div class="card">
              <h2 id="scatter-title">Zero-Sum Index vs Pro-Redistribution Index</h2>
              <p id="scatter-description" class="muted"></p>
              <div style="display: flex; gap: 20px; margin-top: 16px;">
                <!-- Left: Chart + Stats -->
                <div style="flex: 1;">
                  <div class="scatter-chart-wrapper" style="width: 100%; min-height: 420px; position: relative;">
                    <canvas id="scatter-chart-container"></canvas>
                  </div>
                  <!-- Stats below chart -->
                  <div style="display: flex; gap: 16px; margin-top: 12px; padding: 12px; background: #f9fafb; border-radius: 8px;">
                    <div style="font-size: 13px;"><strong>r:</strong> <span id="correlation-r">‚Äî</span></div>
                    <div style="font-size: 13px;"><strong>R¬≤:</strong> <span id="correlation-r2">‚Äî</span></div>
                    <div style="font-size: 13px;"><strong>N:</strong> <span id="scatter-n">‚Äî</span></div>
                    <div style="font-size: 13px;"><strong>Œ≤:</strong> <span id="scatter-slope">‚Äî</span></div>
                  </div>
                  <div id="scatter-stats" style="display: none;"></div>
                </div>
                
                <!-- Right: Filters Panel (like Demographic Patterns) -->
                <div style="flex: 0 0 250px; border-left: 1px solid var(--border); padding-left: 16px;">
                  <h3 style="margin-top: 0; font-size: 14px;">Filters</h3>
                  <div id="scatter-filters-panel"></div>
                  <button id="reset-scatter-filters-btn" class="btn btn--ghost" style="margin-top: 12px; width: 100%; font-size: 12px;">Reset Filters</button>
                  <div id="scatter-filter-summary" style="margin-top: 8px; padding: 8px; background: rgba(37, 99, 235, 0.05); border-left: 3px solid var(--primary); border-radius: 4px; font-size: 11px; line-height: 1.4; display: none;"></div>
                  <div id="scatter-sample-warning" style="margin-top: 8px; padding: 8px; background: rgba(255, 152, 0, 0.1); border-left: 3px solid #f59e0b; border-radius: 4px; font-size: 11px; line-height: 1.4; display: none;"></div>
                </div>
              </div>
            </div>
            
            <!-- Methodology notes moved to bottom as collapsible cards -->
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
              <div style="padding: 12px; background: rgba(255, 193, 7, 0.06); border-radius: 8px; border-left: 3px solid rgba(255, 193, 7, 0.5);">
                <p style="margin: 0; font-size: 11px; color: var(--text);"><strong>‚ö†Ô∏è Correlation ‚â† Causation:</strong> This visualization is <em>descriptive</em> and shows statistical associations only.</p>
              </div>
              <div style="padding: 12px; background: rgba(59, 130, 246, 0.05); border-radius: 8px; border-left: 3px solid rgba(59, 130, 246, 0.5);">
                <p style="margin: 0; font-size: 11px; color: var(--text);"><strong>üìä Binscatter:</strong> X-axis divided into 20 bins, each dot = average Y in that bin. <span style="color: #dc2626;">Red dashed line</span> = OLS fit.</p>
              </div>
              <div id="index-methodology-note" style="padding: 12px; background: rgba(139, 92, 246, 0.05); border-radius: 8px; border-left: 3px solid rgba(139, 92, 246, 0.5);">
                <p style="margin: 0; font-size: 11px; color: var(--text);"><strong>üìê Why Binscatter?</strong> <span id="index-methodology-text">Reveals true relationship from discrete Likert responses.</span></p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- TAB 3: Geographic Map -->
      <div id="tab-geographic-map" class="tab-content">
        <h2 style="margin-top: 0;">County-Level Zero-Sum Thinking Index Map</h2>
        <div class="card">
          <p class="muted">
            This map displays the average Zero-Sum Thinking Index aggregated at the county level across the United States.
            Counties are colored on a gradient from blue (lower zero-sum thinking) through yellow (medium) to orange (higher zero-sum thinking).
          </p>
          <div style="margin-top: 12px; padding: 10px; background: rgba(255, 193, 7, 0.1); border-radius: 8px; border-left: 3px solid rgba(255, 193, 7, 0.5);">
            <p style="margin: 0; font-size: 11px; color: var(--muted);"><strong>Story 3.3.2‚Äì3.3.3:</strong> Filter the map by parental/grandparental immigration status and demographic variables to explore how ancestry and demographics shape geographic patterns of zero-sum thinking.</p>
          </div>
        </div>

        <div class="card" style="background: linear-gradient(135deg, #f8f9fa 0%, #f0f2f5 100%); border: 1px solid var(--border);">
          <h3 style="margin-top: 0; margin-bottom: 16px; font-size: 14px; color: var(--text);">Primary Filter: Immigration Status</h3>
          
          <!-- Immigration Status Filter (Primary) -->
          <div id="map-filters-columns" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-bottom: 16px;">
            <!-- Immigration Status Column -->
            <div class="filter-column">
              <div class="filter-column__header">Immigration Status</div>
              <div id="map-immigration-filters" class="filter-column__options"></div>
            </div>
          </div>

          <!-- Action buttons -->
          <div style="display: flex; gap: 8px; padding-top: 12px; border-top: 1px solid var(--border);">
            <button id="reset-map-filters-btn" class="btn btn--ghost" style="font-size: 12px;">Reset All</button>
            <button id="toggle-demographic-filters-btn" class="btn btn--ghost" style="font-size: 12px;">‚öô Additional Filters</button>
          </div>
          
          <!-- Filter summary and warnings -->
          <div id="map-filter-summary" style="display: none; margin-top: 12px; padding: 10px; background: rgba(37, 99, 235, 0.05); border-left: 4px solid var(--primary); border-radius: 8px; font-size: 12px; line-height: 1.5;"></div>
          <div id="map-sample-size-warning" style="display: none; margin-top: 12px; padding: 10px; background: rgba(255, 152, 0, 0.08); border-left: 4px solid #FF9800; border-radius: 8px;">
            <p style="margin: 0; font-size: 11px; color: var(--text);"><strong>‚ö†Ô∏è Sample Size Warning:</strong> <span id="map-warning-text"></span></p>
          </div>
        </div>

        <div class="card" style="position: relative;">
          <div id="map-container" style="height: 600px; position: relative;"></div>
          
          <!-- Floating Demographic Filters Panel -->
          <div id="map-demographic-filters-panel" style="display: none; position: absolute; top: 16px; right: 16px; width: 320px; max-height: 550px; background: #fff; border: 1px solid var(--border); border-radius: 8px; box-shadow: var(--shadow-lg); padding: 12px; overflow-y: auto; z-index: 1000;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid var(--border);">
              <h4 style="margin: 0; font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text);">Demographic Filters</h4>
              <button id="close-demographic-filters-btn" style="background: none; border: none; font-size: 18px; cursor: pointer; color: var(--muted); padding: 0; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border-radius: 4px; transition: all 0.2s ease;" title="Close">√ó</button>
            </div>
            <div id="map-demographic-filters" style="display: flex; flex-direction: column; gap: 12px;"></div>
            <div style="display: flex; gap: 8px; padding-top: 12px; margin-top: 12px; border-top: 1px solid var(--border);">
              <button id="clear-map-demographics-btn" class="btn btn--ghost" style="font-size: 11px; padding: 6px 8px; flex: 1;">Clear Demographics</button>
            </div>
          </div>
        </div>
          <div style="margin-top: 16px; display: flex; gap: 16px;">
            <div style="flex: 1;">
              <h3 style="margin-top: 0; font-size: 14px;">Legend</h3>
              <div style="margin-bottom: 12px;">
                <div class="legend-gradient-bar" style="height: 24px; margin-bottom: 8px;"></div>
                <div style="display: flex; justify-content: space-between; font-size: 11px; color: var(--muted); font-weight: 500;">
                  <span>0.0 (Low)</span>
                  <span>0.5 (Medium)</span>
                  <span>1.0 (High)</span>
                </div>
              </div>
              <div style="margin-top: 12px; padding: 10px; background: rgba(30, 100, 255, 0.1); border-radius: 6px; border-left: 3px solid #1e64ff;">
                <p style="margin: 0; font-size: 11px; color: var(--muted);"><strong>Blue:</strong> Lower zero-sum thinking beliefs</p>
              </div>
              <div style="margin-top: 8px; padding: 10px; background: rgba(255, 204, 0, 0.1); border-radius: 6px; border-left: 3px solid #ffcc00;">
                <p style="margin: 0; font-size: 11px; color: var(--muted);"><strong>Yellow:</strong> Medium zero-sum thinking beliefs</p>
              </div>
              <div style="margin-top: 8px; padding: 10px; background: rgba(255, 150, 0, 0.1); border-radius: 6px; border-left: 3px solid #ff9600;">
                <p style="margin: 0; font-size: 11px; color: var(--muted);"><strong>Orange:</strong> Higher zero-sum thinking beliefs</p>
              </div>
            </div>
            <div style="flex: 1;">
              <h3 style="margin-top: 0; font-size: 14px;">County Statistics</h3>
              <div id="map-stats" style="font-size: 12px; line-height: 1.8;">
                <div><strong>Total Counties:</strong> <span id="map-county-count">‚Äî</span></div>
                <div><strong>Mean Index:</strong> <span id="map-mean">‚Äî</span></div>
                <div><strong>Median Index:</strong> <span id="map-median">‚Äî</span></div>
                <div><strong>Range:</strong> <span id="map-range">‚Äî</span></div>
              </div>
              <div style="margin-top: 12px; padding: 10px; background: rgba(255, 193, 7, 0.1); border-radius: 8px; border-left: 3px solid rgba(255, 193, 7, 0.5);">
                <p style="margin: 0; font-size: 11px; color: var(--muted);"><strong>Note:</strong> Data shown at county level. Hover over counties to see details.</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ABOUT -->
      <section id="page-about" class="page" aria-labelledby="about-title">
        <div class="card">
          <h2>The Project</h2>
          <p>This website was created as an educational project to make academic research on zero-sum thinking accessible to a broader audience. It presents a non-partisan, public-facing summary of published research, combining conceptual explanation, data visualization, and a self-assessment tool.</p>
          <p>The site does not conduct original research or collect new data. Its purpose is to support learning, policy discussion, and informed reflection on how beliefs about gains and losses relate to political attitudes and social outcomes.</p>

          <h2>The Research Authors</h2>
          <p>The research summarized on this website was conducted by Sahil Chinoy, Nathan Nunn, Sandra Sequeira, and Stefanie Stantcheva.</p>
          <ul>
            <li>Sahil Chinoy: A Postdoctoral Associate and Lecturer at Yale University, he will join Stanford University as an Assistant Professor in 2026. Reference: https://politicalscience.yale.edu/people/sahil-chinoy.</li>
            <li>Nathan Nunn: The Frederic E. Abbe Professor of Economics at Harvard (2016‚Äì2022) and currently a Professor at the Vancouver School of Economics (UBC). Reference: https://economics.ubc.ca/profile/nathan-nunn/.</li>
            <li>Sandra Sequeira: A Professor of Development Economics at the London School of Economics (LSE) and a recipient of the 2022 Philip Leverhulme Prize. Reference: https://www.lse.ac.uk/school-of-public-policy/news/faculty/sandra-sequeira.</li>
            <li>Stefanie Stantcheva: The Nathaniel Ropes Professor of Political Economy at Harvard University and founder of the Social Economics Lab. Reference: https://stantcheva.scholars.harvard.edu/biocv.</li>
          </ul>

          <h2>The Website Project</h2>
          <p>This website was developed as part of the Programming and Data for Policy Makers course at the Harvard Kennedy School (https://www.hks.harvard.edu/courses/programming-and-data-policymakers).</p>
          <p>The course introduces students to computational thinking, data analysis, and digital tools for policy analysis and public communication. This project applies those skills to the responsible translation of academic research into an interactive, public-facing format.</p>

          <h2>Acknowledgment of Course Instructors</h2>
          <p>The website team gratefully acknowledges the instructors of the Programming and Data for Policy Makers course Professors Dhrumil Mehta (Adjunct Professor of Public Policy) and Aarushi Sahejpal and the Course Assistant, Asa Royal for their guidance and instruction. Responsibility for the content, interpretation, and presentation of this website rests solely with the website team and does not imply endorsement by the course instructors or Harvard Kennedy School.</p>

          <h2>The Website Team</h2>
          <p>This website was developed independently by the course participant(s) as part of the above program. Any errors, omissions, or interpretations are the responsibility of the website team alone.</p>

          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-top: 24px;">
            <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; text-align: center;">
              <h3 style="margin: 0 0 8px 0; font-size: 18px;">Liyang Chen</h3>
              <p style="margin: 0; font-size: 14px; color: #6b7280;">Project Lead</p>
              <p style="margin: 8px 0 0 0; font-size: 13px;">MPA Student at Harvard Kennedy School. Passionate about understanding political beliefs and building tools for evidence-based policy dialogue.</p>
            </div>
            <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; text-align: center;">
              <h3 style="margin: 0 0 8px 0; font-size: 18px;">Junyu Wang</h3>
              <p style="margin: 0; font-size: 14px; color: #6b7280;">Developer</p>
              <p style="margin: 8px 0 0 0; font-size: 13px;">Graduate student at Harvard Kennedy School. Interested in technology, public policy, and finance development. Leading website development and technical implementation.</p>
            </div>
            <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; text-align: center;">
              <h3 style="margin: 0 0 8px 0; font-size: 18px;">Wondem Goshu</h3>
              <p style="margin: 0; font-size: 14px; color: #6b7280;">Developer</p>
              <p style="margin: 8px 0 0 0; font-size: 13px;">MC-MPA, Mason Fellow, HKS</p>
            </div>
          </div>

          <h2>Disclaimer</h2>
          <p>This website is an independent educational presentation of published academic research. It does not represent the views of the original authors, their institutions, or any funding bodies.</p>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container muted">
        Programming and Data for Policymakers [DPI-691M] zero-sum team
      </div>
    </footer>

    <script src="./lib/data/mockDataViz.js"></script>
    <script src="./lib/game.js"></script>
    <script src="./app.js"></script>
  </body>
</html>
